<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Performance benchmarks · Oceananigans.jl</title><link rel="canonical" href="https://climate-machine.github.io/Oceananigans.jl/latest/benchmarks/index.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/invenia.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Oceananigans.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../examples/">Examples</a></li><li><a class="toctext" href="../algorithm/">Numerical algorithm</a></li><li class="current"><a class="toctext" href>Performance benchmarks</a><ul class="internal"></ul></li><li><span class="toctext">Internals</span><ul><li><a class="toctext" href="../internal/grids/">Grids</a></li><li><a class="toctext" href="../internal/fields/">Fields</a></li><li><a class="toctext" href="../internal/operators/">Operators</a></li></ul></li><li><a class="toctext" href="../subject_index/">Index</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Performance benchmarks</a></li></ul><a class="edit-page" href="https://github.com/climate-machine/Oceananigans.jl/blob/master/docs/src/benchmarks.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Performance benchmarks</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Performance-benchmarks-1" href="#Performance-benchmarks-1">Performance benchmarks</a></h1><p>The <code>benchmarks/benchmarks.jl</code> script can be run to benchmark Oceananigans.jl on your machine. The script times how long a single time step takes on the CPU and GPU using <code>Float32</code> and <code>Float64</code> for various model resolutions. It uses TimerOutputs.jl to nicely format the benchmarks. It also prints out CPU-&gt;GPU speedups and Float64-&gt;Float32 &quot;speedups&quot;.</p><p>Right now it only benchmarks a simple &quot;static ocean&quot; configuration. The time stepping and Poisson solver still takes the same amount of time whether the ocean is static or active, so it should be indicative of actual performance.</p><p>Here is the script&#39;s output when run on a single-core of a Intel Xeon E5-2680 v4 @ 2.40 GHz CPU and on an Nvidia Tesla V100 GPU.</p><pre><code class="language-none"> ──────────────────────────────────────────────────────────────────────────────────────────────────
             Oceananigans.jl benchmarks                    Time                   Allocations
                                                   ──────────────────────   ───────────────────────
                 Tot / % measured:                       718s / 46.6%           17.2GiB / 0.02%

 Section                                   ncalls     time   %tot     avg     alloc   %tot      avg
 ──────────────────────────────────────────────────────────────────────────────────────────────────
 256x256x256 static ocean (CPU, Float32)       10     168s  50.2%   16.8s   20.3KiB  0.73%  2.03KiB
 256x256x256 static ocean (CPU, Float64)       10     141s  42.3%   14.1s   20.3KiB  0.73%  2.03KiB
 128x128x128 static ocean (CPU, Float32)       10    12.4s  3.72%   1.24s   14.5KiB  0.52%  1.45KiB
 128x128x128 static ocean (CPU, Float64)       10    9.00s  2.69%   900ms   14.8KiB  0.54%  1.48KiB
  64x 64x 64 static ocean (CPU, Float32)       10    1.03s  0.31%   103ms   14.2KiB  0.51%  1.42KiB
 256x256x256 static ocean (GPU, Float64)       10    891ms  0.27%  89.1ms    333KiB  12.0%  33.3KiB
 256x256x256 static ocean (GPU, Float32)       10    859ms  0.26%  85.9ms    329KiB  11.9%  32.9KiB
  64x 64x 64 static ocean (CPU, Float64)       10    635ms  0.19%  63.5ms   13.5KiB  0.49%  1.35KiB
 128x128x128 static ocean (GPU, Float64)       10   80.2ms  0.02%  8.02ms    332KiB  12.0%  33.2KiB
 128x128x128 static ocean (GPU, Float32)       10   77.0ms  0.02%  7.70ms    329KiB  11.9%  32.9KiB
  32x 32x 32 static ocean (CPU, Float32)       10   72.3ms  0.02%  7.23ms   13.1KiB  0.47%  1.31KiB
  32x 32x 32 static ocean (CPU, Float64)       10   45.1ms  0.01%  4.51ms   13.5KiB  0.49%  1.35KiB
  64x 64x 64 static ocean (GPU, Float64)       10   8.30ms  0.00%   830μs    332KiB  12.0%  33.2KiB
  64x 64x 64 static ocean (GPU, Float32)       10   8.05ms  0.00%   805μs    329KiB  11.9%  32.9KiB
  32x 32x 32 static ocean (GPU, Float64)       10   3.63ms  0.00%   363μs    332KiB  12.0%  33.2KiB
  32x 32x 32 static ocean (GPU, Float32)       10   3.45ms  0.00%   345μs    329KiB  11.9%  32.9KiB
 ──────────────────────────────────────────────────────────────────────────────────────────────────

CPU Float64 -&gt; Float32 speedups:
 32x 32x 32 static ocean: 0.623
 64x 64x 64 static ocean: 0.614
128x128x128 static ocean: 0.723
256x256x256 static ocean: 0.841

GPU Float64 -&gt; Float32 speedups:
 32x 32x 32 static ocean: 1.052
 64x 64x 64 static ocean: 1.031
128x128x128 static ocean: 1.042
256x256x256 static ocean: 1.038

CPU -&gt; GPU speedsup:
 32x 32x 32 static ocean (Float32): 20.923
 32x 32x 32 static ocean (Float64): 12.402
 64x 64x 64 static ocean (Float32): 128.536
 64x 64x 64 static ocean (Float64): 76.582
128x128x128 static ocean (Float32): 161.689
128x128x128 static ocean (Float64): 112.144
256x256x256 static ocean (Float32): 195.877
256x256x256 static ocean (Float64): 158.772</code></pre><footer><hr/><a class="previous" href="../algorithm/"><span class="direction">Previous</span><span class="title">Numerical algorithm</span></a><a class="next" href="../internal/grids/"><span class="direction">Next</span><span class="title">Grids</span></a></footer></article></body></html>
