<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Boundary conditions · Oceananigans.jl</title><link rel="canonical" href="https://climate-machine.github.io/Oceananigans.jl/latest/model_setup/boundary_conditions/index.html"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Oceananigans.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../home/">Home</a></li><li><a class="tocitem" href="../../installation_instructions/">Installation instructions</a></li><li><a class="tocitem" href="../../using_gpus/">Using GPUs</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/one_dimensional_diffusion/">One-dimensional diffusion</a></li><li><a class="tocitem" href="../../generated/two_dimensional_turbulence/">Two-dimensional turbulence</a></li><li><a class="tocitem" href="../../generated/ocean_wind_mixing_and_convection/">Ocean wind mixing and convection</a></li><li><a class="tocitem" href="../../generated/ocean_convection_with_plankton/">Ocean convection with plankton</a></li><li><a class="tocitem" href="../../generated/internal_wave/">Internal wave</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox" checked/><label class="tocitem" for="menuitem-5"><span class="docs-label">Model setup</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../architecture/">Architecture</a></li><li><a class="tocitem" href="../number_type/">Number type</a></li><li><a class="tocitem" href="../grids/">Grid</a></li><li><a class="tocitem" href="../clock/">Clock</a></li><li><a class="tocitem" href="../coriolis/">Coriolis (rotation)</a></li><li><a class="tocitem" href="../tracers/">Tracers</a></li><li><a class="tocitem" href="../buoyancy_and_equation_of_state/">Buoyancy and equation of state</a></li><li class="is-active"><a class="tocitem" href>Boundary conditions</a><ul class="internal"><li><a class="tocitem" href="#Types-of-boundary-conditions-1"><span>Types of boundary conditions</span></a></li><li><a class="tocitem" href="#Default-boundary-conditions-1"><span>Default boundary conditions</span></a></li><li><a class="tocitem" href="#Boundary-condition-structures-1"><span>Boundary condition structures</span></a></li><li><a class="tocitem" href="#Creating-individual-boundary-conditions-1"><span>Creating individual boundary conditions</span></a></li><li><a class="tocitem" href="#Specifying-boundary-conditions-with-functions-1"><span>Specifying boundary conditions with functions</span></a></li><li><a class="tocitem" href="#Specifying-boundary-conditions-on-a-field-1"><span>Specifying boundary conditions on a field</span></a></li><li><a class="tocitem" href="#Specifying-model-boundary-conditions-1"><span>Specifying model boundary conditions</span></a></li></ul></li><li><a class="tocitem" href="../forcing_functions/">Forcing functions</a></li><li><a class="tocitem" href="../model_parameters/">Model parameters</a></li><li><a class="tocitem" href="../turbulent_diffusivity_closures_and_les_models/">Turbulent diffusivity closures and LES models</a></li><li><a class="tocitem" href="../diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../output_writers/">Output writers</a></li><li><a class="tocitem" href="../time_stepping/">Time stepping</a></li><li><a class="tocitem" href="../setting_initial_conditions/">Setting initial conditions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Physics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../physics/navier_stokes_and_tracer_conservation/">Navier-Stokes and tracer conservation equations</a></li><li><a class="tocitem" href="../../physics/coordinate_system_and_notation/">Coordinate system and notation</a></li><li><a class="tocitem" href="../../physics/boussinesq_approximation/">The Boussinesq approximation</a></li><li><a class="tocitem" href="../../physics/coriolis_forces/">Coriolis forces</a></li><li><a class="tocitem" href="../../physics/buoyancy_and_equations_of_state/">Buoyancy model and equations of state</a></li><li><a class="tocitem" href="../../physics/turbulence_closures/">Turbulence closures</a></li><li><a class="tocitem" href="../../physics/surface_gravity_waves/">Surface gravity waves and the Craik-Leibovich approximation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">Numerical implementation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../numerical_implementation/pressure_decomposition/">Pressure decomposition</a></li><li><a class="tocitem" href="../../numerical_implementation/time_stepping/">Time stepping</a></li><li><a class="tocitem" href="../../numerical_implementation/finite_volume/">Finite volume method</a></li><li><a class="tocitem" href="../../numerical_implementation/spatial_operators/">Spatial operators</a></li><li><a class="tocitem" href="../../numerical_implementation/boundary_conditions/">Boundary conditions</a></li><li><a class="tocitem" href="../../numerical_implementation/poisson_solvers/">Poisson solvers</a></li><li><a class="tocitem" href="../../numerical_implementation/large_eddy_simulation/">Large eddy simulation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">Verification experiments</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../verification/taylor_green_vortex/">Taylor-Green vortex</a></li><li><a class="tocitem" href="../../verification/stratified_couette_flow/">Stratified Couette flow</a></li></ul></li><li><a class="tocitem" href="../../gallery/">Gallery</a></li><li><a class="tocitem" href="../../benchmarks/">Performance benchmarks</a></li><li><a class="tocitem" href="../../contributing/">Contributor&#39;s guide</a></li><li><a class="tocitem" href="../../library/">Library</a></li><li><input class="collapse-toggle" id="menuitem-13" type="checkbox"/><label class="tocitem" for="menuitem-13"><span class="docs-label">Appendix</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../appendix/staggered_grid/">Staggered grid</a></li><li><a class="tocitem" href="../../appendix/fractional_step/">Fractional step method</a></li></ul></li><li><a class="tocitem" href="../../">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model setup</a></li><li class="is-active"><a href>Boundary conditions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Boundary conditions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/climate-machine/Oceananigans.jl/blob/master/docs/src/model_setup/boundary_conditions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Boundary-conditions-1"><a class="docs-heading-anchor" href="#Boundary-conditions-1">Boundary conditions</a><a class="docs-heading-anchor-permalink" href="#Boundary-conditions-1" title="Permalink"></a></h1><p>A boundary condition is applied to each field, dimension, and endpoint. There are left and right (or bottom and top) boundary conditions for each of the x, y, and z dimensions so each field is associated with 6 boundary conditions. Each of these boundary conditions may be specified individually. Each boundary condition can be specified via a constant value, an array, or a function.</p><p>See <a href="../../numerical_implementation/boundary_conditions/#numerical_bcs-1">Numerical implementation of boundary conditions</a> for more details.</p><div class="admonition is-warning"><header class="admonition-header">Consistent boundary conditions</header><div class="admonition-body"><p>Be careful to ensure that you don&#39;t set up a model with inconsistent boundary conditions. For example, periodic boundary conditions should remain imposed on all fields and endpoints for periodic dimensions, and velocities normal to a wall (e.g. vertical velocity w with walls at the top and bottom) must have no-penetration boundary conditions.</p></div></div><h2 id="Types-of-boundary-conditions-1"><a class="docs-heading-anchor" href="#Types-of-boundary-conditions-1">Types of boundary conditions</a><a class="docs-heading-anchor-permalink" href="#Types-of-boundary-conditions-1" title="Permalink"></a></h2><ol><li><a href="../../library/#Oceananigans.Periodic"><code>Periodic</code></a></li><li><a href="../../library/#Oceananigans.Flux"><code>Flux</code></a></li><li><a href="../../library/#Oceananigans.Value"><code>Value</code></a> (<a href="../../library/#Oceananigans.Dirchlet"><code>Dirchlet</code></a>)</li><li><a href="../../library/#Oceananigans.Gradient"><code>Gradient</code></a> (<a href="../../library/#Oceananigans.Neumann"><code>Neumann</code></a>)</li><li><a href="model_setup/@ref NoPenetration"><code>No-penetration</code></a></li></ol><p>Notice that open boundary conditions and radiation boundary conditions can be imposed via flux or value boundary conditions defined by a function or array.</p><h2 id="Default-boundary-conditions-1"><a class="docs-heading-anchor" href="#Default-boundary-conditions-1">Default boundary conditions</a><a class="docs-heading-anchor-permalink" href="#Default-boundary-conditions-1" title="Permalink"></a></h2><p>By default, periodic boundary conditions are applied on all fields along periodic dimensions. All other boundary conditions are no-flux, except for velocities normal to a wall which get no-penetration boundary conditions.</p><h2 id="Boundary-condition-structures-1"><a class="docs-heading-anchor" href="#Boundary-condition-structures-1">Boundary condition structures</a><a class="docs-heading-anchor-permalink" href="#Boundary-condition-structures-1" title="Permalink"></a></h2><p>Oceananigans uses a hierarchical structure to expressing boundary conditions.</p><ol><li>A <a href="../../library/#Oceananigans.BoundaryCondition"><code>BoundaryCondition</code></a> is associated with every field, dimension, and endpoint.</li><li>Boundary conditions specifying the condition at the left and right endpoints (or top and bottom endpoints) are grouped into <a href="../../library/#Oceananigans.CoordinateBoundaryConditions"><code>CoordinateBoundaryConditions</code></a>.</li><li>A set of three <code>CoordinateBoundaryConditions</code> specifying the boundary conditions along the x, y, and z dimensions for a single field are grouped into a <a href="../../library/#Oceananigans.FieldBoundaryConditions"><code>FieldBoundaryConditions</code></a> named tuple.</li><li>A set of <code>FieldBoundaryConditions</code>, one for each field, are grouped together into a named tuple and passed to the <code>Model</code> constructor.</li></ol><p>Boundary conditions are defined at model construction time by passing a named tuple of <code>FieldBoundaryConditions</code> specifying boundary conditions on every field: velocities (<span>$u$</span>, <span>$v$</span>, <span>$w$</span>) and all tracers.</p><p>Typically you only want to impose a few boundary conditions, in which case it&#39;s useful to use convenience constructors such as <a href="../../library/#Oceananigans.HorizontallyPeriodicBCs-Tuple{}"><code>HorizontallyPeriodicBCs</code></a> when constructing horizontally periodic boundary conditions for a field and <a href="../../library/#Oceananigans.HorizontallyPeriodicSolutionBCs-Tuple{}"><code>HorizontallyPeriodicSolutionBCs</code></a> when constructing horizontally periodic boundary conditions for a model. Also see <a href="../../library/#Oceananigans.ChannelBCs-Tuple{}"><code>ChannelBCs</code></a> and <a href="../../library/#Oceananigans.ChannelSolutionBCs-Tuple{}"><code>ChannelSolutionBCs</code></a>.</p><p>See the sections below for more details. The examples and verification experiments also provide examples for setting up many difference kinds of boundary conditions.</p><h2 id="Creating-individual-boundary-conditions-1"><a class="docs-heading-anchor" href="#Creating-individual-boundary-conditions-1">Creating individual boundary conditions</a><a class="docs-heading-anchor-permalink" href="#Creating-individual-boundary-conditions-1" title="Permalink"></a></h2><p>Some examples of creating individual boundary conditions:</p><ol><li>A constant Value (Dirchlet) boundary condition, perhaps representing a constant temperature at some boundary.</li></ol><pre><code class="language-julia">constant_T_bc = BoundaryCondition(Value, 20)</code></pre><pre><code class="language-none">BoundaryCondition: type=Value, condition=20
</code></pre><ol><li>A constant flux boundary condition, perhaps representing a constant wind stress at some boundary such as the ocean surface.</li></ol><pre><code class="language-julia">ρ₀ = 1027  # Reference density [kg/m³]
τₓ = 0.08  # Wind stress [N/m²]
wind_stress_bc = BoundaryCondition(Flux, τₓ/ρ₀)</code></pre><pre><code class="language-none">BoundaryCondition: type=Flux, condition=7.789678675754625e-5
</code></pre><ol><li>A spatially varying (white noise) cooling flux to be imposed at some boundary. Note that the boundary condition is given by the array <code>Q</code> here. When running on the GPU, <code>Q</code> must be converted to a <code>CuArray</code>.</li></ol><pre><code class="language-julia">Nx = Ny = 16  # Number of grid points.

ρ₀ = 1027  # Reference density [kg/m³]
cₚ = 4000  # Heat capacity of water at constant pressure [J/kg/K]

Q  = randn(Nx, Ny) ./ (ρ₀ * cₚ)

white_noise_T_bc = BoundaryCondition(Flux, Q)</code></pre><pre><code class="language-none">BoundaryCondition: type=Flux, condition=[-4.160891626527976e-7 2.7631539968808324e-8 -2.3257226725822264e-7 4.9288105712938435e-8 1.6435327345616554e-7 2.965105590532374e-7 2.3025840625073873e-7 -3.559301783962343e-8 -5.083101367458268e-8 2.504898758649677e-7 5.008190578219358e-7 -1.2795680565877362e-7 -2.1196738787286317e-7 -1.8486547147550982e-8 2.4692064363510985e-7 4.789157220885734e-8; 9.410738078840249e-8 4.8327360316546584e-8 2.229005421962541e-8 1.5826831265254052e-7 -6.546518479858043e-7 1.4452982295378663e-7 -3.103951204300081e-7 2.738621385502518e-7 2.656123846896841e-7 6.137709105050101e-8 -1.750554388810165e-7 1.5276097263861946e-7 3.519937009381274e-7 -2.635285759407304e-7 -1.1768280031834198e-7 -1.9673014991227193e-7; 4.6666124344271504e-7 -4.077842900560403e-7 9.585094975225085e-8 2.2655627927439454e-7 1.1903147737990825e-7 3.5593216152466104e-7 1.500273037106892e-7 2.690415894368138e-7 -1.779193748989806e-7 2.564335085561612e-7 -1.7139024098467164e-7 -1.6986144648835996e-7 8.436005579861278e-8 2.153799154756413e-7 2.634521941527902e-7 -1.5266796589576144e-7; -2.883501467733372e-7 -2.9884010220349214e-7 -3.0567391965665934e-8 2.6838746697794136e-7 1.4824872709680542e-7 1.7115125251187337e-7 -1.9017265083859676e-7 -8.136690275669419e-8 -1.344804125718828e-7 -3.275561907939909e-8 3.3428429754552794e-7 1.3471946435786037e-7 1.0115878048826748e-7 -2.681630500461448e-7 -3.710398347183236e-8 -1.4714856529359795e-7; 1.2627946084807942e-7 4.41138152844111e-9 3.5019264191335413e-7 2.0297930687638524e-7 -9.491952971746619e-9 8.37438906978865e-8 -2.713958206700341e-7 8.659555686218038e-8 2.959953225980054e-7 7.013127608685145e-8 -8.508707760615809e-8 -6.193047989906313e-8 1.6503977987198073e-7 3.79885601258443e-7 -4.9927143916284975e-8 -2.5913679723434183e-7; 6.132298883362981e-7 1.2329072349503442e-7 2.649242501550169e-7 -2.9447726393080385e-8 1.1593785347788887e-7 -1.0944622044973997e-7 3.9060179974310167e-7 2.766115915954197e-7 -2.3104617236875757e-7 -2.938655760466276e-7 -1.6943878419144167e-7 -1.786530029484922e-7 1.118755390692692e-7 -8.563025060082956e-8 -3.2482390757206536e-7 -1.1142678094049081e-7; 1.2936106548731022e-7 -5.729339079699465e-8 2.6249658185107696e-7 4.937076328545104e-7 6.676643500021693e-8 -1.1143256797597608e-8 7.397993271643926e-8 3.565084300706634e-8 1.877869503688789e-7 1.25809331366784e-7 -5.05225377138365e-7 7.209771549797676e-8 -1.9516198883290753e-7 8.679061396560008e-8 -8.963122514423362e-8 2.0136910531047889e-7; 1.5861630470904997e-7 2.436223474676886e-7 2.4587943628264224e-7 1.0174197999383564e-7 -1.2721192819537343e-7 3.026401422348589e-7 -1.064039716946577e-7 1.2359291704998853e-7 -1.1398294951319606e-7 9.526058460850634e-9 -5.206352361359203e-7 -3.431569404693284e-7 8.99351973814155e-8 1.3659214445174676e-7 -6.691336602294394e-8 4.99218955368408e-8; 4.3275010890401076e-7 -8.444119339757168e-8 -1.740774583957252e-8 4.1681051548407287e-7 1.9784896544892348e-7 -8.92809503514887e-8 -2.178175920646887e-7 -1.3638157688111997e-7 -2.0793026058694378e-7 -1.273761546429446e-7 8.395146415444723e-9 -1.1684400136359239e-7 -1.7787757180375687e-7 2.438607864161851e-7 -6.510717352102904e-9 3.617654541378115e-7; 1.3738051666786523e-7 3.014159701968208e-7 7.783530827090084e-8 1.1029311792004692e-7 1.4463983062942352e-8 8.539034494664717e-8 -1.6053058141551904e-7 1.40849554429404e-7 -1.8546295488362656e-7 6.401250850607559e-8 1.3207516588098186e-7 9.957630985486378e-8 1.3741208221094246e-7 -1.0005860590508516e-7 -1.589460111247219e-7 6.581796411445105e-9; -1.5518295803824404e-7 -1.3684054512105167e-7 1.2797429707606655e-8 -5.500572213561545e-7 -2.699647377591161e-7 -2.1058950714074818e-7 -9.853783381700762e-8 -1.2504614749862807e-7 -6.427695075765038e-8 -3.010059483456789e-7 -2.352070574947974e-7 -1.873016223717809e-7 -3.350808244055394e-7 -1.4385255169979612e-7 1.456971928620341e-7 2.622689314691735e-8; 5.7753186718186286e-8 -5.52652042346773e-7 -6.511029087337426e-7 1.3059000344320098e-7 4.990400877459825e-8 1.787560925827946e-7 3.4143341922391053e-7 -3.0420347698994715e-7 -1.8368925998713075e-7 -2.975593075290265e-7 -2.6368926375904155e-7 5.065082520737968e-8 -4.142358531413382e-8 -2.3619358961424476e-7 -2.8982122230721427e-7 -2.879095564712198e-7; 8.389819780893555e-8 -8.616600239650224e-8 2.889293775586607e-7 -2.6769837121566673e-7 -8.894433739508601e-8 2.8152410410683198e-8 1.0100685862672837e-7 1.1646311572184607e-7 -3.8355775245981927e-7 -2.3527327285503802e-8 2.1337139614068835e-7 -1.8762267636199213e-7 -3.1945411776849334e-8 5.295200961434734e-7 -3.628599158038638e-8 3.997631676507355e-7; 3.1371699828414683e-7 -6.778583412095035e-8 1.0453943069518386e-7 -5.755393341574668e-7 -8.175874910594662e-8 -1.0744333929415116e-7 -3.0208270376510567e-7 1.797794339613129e-7 -6.183986680888135e-8 2.263628132033646e-8 1.2378253814880107e-7 8.188193444532845e-8 2.8586111202465274e-7 3.7952856696335286e-7 -2.47397828454985e-7 -3.9972288826632875e-8; -9.006678155800166e-8 -2.7427313648063973e-8 -1.8021297889262717e-7 -2.9714590924858974e-7 -2.530171895683413e-7 7.510289222862479e-8 3.593929925026907e-7 -3.518738965916147e-7 1.3509618642125256e-7 1.9206378323892687e-7 -1.6670112407894316e-8 -3.3710107918029297e-8 3.063476493348427e-7 -1.8071410076732455e-8 -1.8504164929916044e-7 9.387599526161925e-8; 2.595184766610066e-8 -3.1963798321098083e-7 6.119271964693314e-9 -6.730933925428949e-8 1.8533415819634901e-7 -5.34731943880696e-7 -9.225253720648719e-8 2.834323939211418e-7 5.166445638553743e-8 -2.0994454417170142e-7 -1.4114771285778796e-7 -2.759061136886384e-8 -1.5517390275566037e-8 7.92543607203088e-8 4.472855854502593e-7 1.4283468183769134e-7]
</code></pre><h2 id="Specifying-boundary-conditions-with-functions-1"><a class="docs-heading-anchor" href="#Specifying-boundary-conditions-with-functions-1">Specifying boundary conditions with functions</a><a class="docs-heading-anchor-permalink" href="#Specifying-boundary-conditions-with-functions-1" title="Permalink"></a></h2><p>You can also specify the boundary condition via a function. For z boundary conditions the function will be called with the signature</p><pre><code class="language-none">f(i, j, grid, t, U, C, params)</code></pre><p>where <code>i, j</code> is the grid index, <code>grid</code> is <code>model.grid</code>, <code>t</code> is the <code>model.clock.time</code>, <code>U</code> is the named tuple <code>model.velocities</code>, <code>C</code> is the named tuple <code>C.tracers</code>, and <code>params</code> is the user-defined <code>model.parameters</code>. The signature is similar for x and y boundary conditions expect that <code>i, j</code> is replaced with <code>j, k</code> and <code>i, k</code> respectively.</p><p>We can add a fourth example now:</p><ol><li>A spatially varying and time-dependent heating representing perhaps a localized source of heating modulated by a diurnal cycle.</li></ol><pre><code class="language-julia">@inline Q(i, j, grid, t, U, C, params) = @inbounds exp(-(grid.xC[i]^2 + grid.yC[j]^2)) * sin(2π*t)
localized_heating_bc = BoundaryCondition(Flux, Q)</code></pre><pre><code class="language-none">BoundaryCondition: type=Flux, condition=Q
</code></pre><div class="admonition is-info"><header class="admonition-header">Performance of functions in boundary conditions</header><div class="admonition-body"><p>For performance reasons, you should define all functions used in boundary conditions as inline functions via the <code>@inline</code> macro. If any arrays are accessed within the function, disabling bounds-checking with <code>@inbounds</code> can also speed things up.</p></div></div><h2 id="Specifying-boundary-conditions-on-a-field-1"><a class="docs-heading-anchor" href="#Specifying-boundary-conditions-on-a-field-1">Specifying boundary conditions on a field</a><a class="docs-heading-anchor-permalink" href="#Specifying-boundary-conditions-on-a-field-1" title="Permalink"></a></h2><p>To, for example, create a set of horizontally periodic field boundary conditions</p><pre><code class="language-julia">T_bcs = HorizontallyPeriodicBCs(   top = BoundaryCondition(Value, 20),
                                bottom = BoundaryCondition(Gradient, 0.01))</code></pre><pre><code class="language-none">Oceananigans.FieldBoundaryConditions (NamedTuple{(:x, :y, :z)}), with boundary conditions
├── x: CoordinateBoundaryConditions{BoundaryCondition{Periodic,Nothing},BoundaryCondition{Periodic,Nothing}}
├── y: CoordinateBoundaryConditions{BoundaryCondition{Periodic,Nothing},BoundaryCondition{Periodic,Nothing}}
└── z: CoordinateBoundaryConditions{BoundaryCondition{Gradient,Float64},BoundaryCondition{Value,Int64}}</code></pre><p>which will create a <a href="../../library/#Oceananigans.FieldBoundaryConditions"><code>FieldBoundaryConditions</code></a> object for temperature T appropriate for horizontally periodic model configurations where the x and y boundary conditions are all periodic.</p><h2 id="Specifying-model-boundary-conditions-1"><a class="docs-heading-anchor" href="#Specifying-model-boundary-conditions-1">Specifying model boundary conditions</a><a class="docs-heading-anchor-permalink" href="#Specifying-model-boundary-conditions-1" title="Permalink"></a></h2><p>A named tuple of <a href="../../library/#Oceananigans.FieldBoundaryConditions"><code>FieldBoundaryConditions</code></a> objects must be passed to the Model constructor specifying boundary conditions on all fields. To, for example, impose non-default boundary conditions on the u-velocity and temperature</p><pre><code class="language-julia">u_bcs = HorizontallyPeriodicBCs(   top = BoundaryCondition(Value, 0.1),
                                bottom = BoundaryCondition(Value, -0.1))
T_bcs = HorizontallyPeriodicBCs(   top = BoundaryCondition(Value, 20),
                                bottom = BoundaryCondition(Gradient, 0.01))

model_bcs = HorizontallyPeriodicSolutionBCs(u=u_bcs, T=T_bcs)

model = Model(grid=RegularCartesianGrid(size=(16, 16, 16), length=(1, 1, 1)),
              boundary_conditions=model_bcs)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../buoyancy_and_equation_of_state/">« Buoyancy and equation of state</a><a class="docs-footer-nextpage" href="../forcing_functions/">Forcing functions »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 19 December 2019 13:33">Thursday 19 December 2019</span>. Using Julia version 1.2.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
